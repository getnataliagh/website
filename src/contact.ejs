<!DOCTYPE html>
<html lang="<%= locals.lang %>">
<head>
  <title><%= locals.pageMeta.title %></title>
  <meta name="description" content="<%= locals.pageMeta.description %>">
  <%- include('./includes/_head.ejs') %>
</head>
<body class="min-h-screen flex flex-col">

<%- include('./includes/_header.ejs') %>

<main class="flex-grow">

<!-- Hero Section -->
<section class="section bg-gradient-to-br from-white to-primary/5 relative overflow-hidden">
  <!-- Decorative gradient orbs -->
  <div class="gradient-orb gradient-orb-1"></div>
  <div class="gradient-orb gradient-orb-2"></div>

  <div class="container-content relative z-10">
    <div class="text-center max-w-3xl mx-auto mb-12 animate-on-scroll">
      <h1 class="hero-title text-h1-mobile md:text-h1 font-bold text-police-titre mb-4">
        <%= locals.contact.title %>
      </h1>
      <p class="hero-subtitle text-lg text-police-grey">
        <%= locals.contact.subtitle %>
      </p>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
      <!-- Contact Form -->
      <div class="card animate-on-scroll--left">
        <h2 class="text-h3 font-bold text-police-titre mb-6">
          <%= locals.contact.formTitle %>
        </h2>
        <form id="contactForm" class="space-y-5">
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
              <label for="firstName" class="form-label form-label-required"><%= locals.ui.firstName %></label>
              <input type="text" id="firstName" name="firstName" required class="form-input">
            </div>
            <div>
              <label for="lastName" class="form-label form-label-required"><%= locals.ui.lastName %></label>
              <input type="text" id="lastName" name="lastName" required class="form-input">
            </div>
          </div>
          <div>
            <label for="email" class="form-label form-label-required"><%= locals.ui.email %></label>
            <input type="email" id="email" name="email" required class="form-input">
          </div>
          <div>
            <label for="company" class="form-label form-label-required"><%= locals.ui.company %></label>
            <input type="text" id="company" name="company" required class="form-input">
          </div>
          <div>
            <label for="phone" class="form-label"><%= locals.ui.phone %></label>
            <input type="tel" id="phone" name="phone" class="form-input">
          </div>
          <div>
            <label for="sector" class="form-label"><%= locals.ui.sector %></label>
            <select id="sector" name="sector" class="form-input form-select">
              <option value=""><%= locals.ui.selectSector %></option>
              <% locals.contact.sectors.forEach(function(sector) { %>
              <option value="<%= sector.value %>"><%= sector.label %></option>
              <% }); %>
            </select>
          </div>
          <div>
            <label for="message" class="form-label"><%= locals.ui.message %></label>
            <textarea id="message" name="message" rows="4" class="form-input form-textarea"></textarea>
          </div>
          <div class="pt-2">
            <button type="submit" id="submitBtn" class="btn-primary w-full" data-track-content data-content-name="Submit Demo Request" data-content-piece="Contact Form">
              <span id="btnText"><%= locals.ui.sendRequest %></span>
              <span id="btnLoader" class="hidden"><%= locals.ui.sending %></span>
              <svg id="btnIcon" class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"></path>
              </svg>
            </button>
          </div>
          <div id="formStatus" class="hidden p-4 rounded-md text-center"></div>
        </form>

        <script>
          document.getElementById('contactForm').addEventListener('submit', function(e) {
            e.preventDefault();

            var form = this;
            var submitBtn = document.getElementById('submitBtn');
            var btnText = document.getElementById('btnText');
            var btnLoader = document.getElementById('btnLoader');
            var btnIcon = document.getElementById('btnIcon');
            var formStatus = document.getElementById('formStatus');

            // UI State: Loading
            submitBtn.disabled = true;
            btnText.classList.add('hidden');
            btnIcon.classList.add('hidden');
            btnLoader.classList.remove('hidden');
            formStatus.classList.add('hidden');
            formStatus.className = 'hidden p-4 rounded-md text-center';

            var formData = new FormData(form);
            var data = Object.fromEntries(formData.entries());

            fetch('https://n8n.getnatalia.com/webhook/92b0d8b1-9d10-401a-9afe-95fbb8aae412', {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json'
              },
              body: JSON.stringify(data)
            })
            .then(function(response) {
              if (response.ok) {
                formStatus.textContent = "<%= locals.ui.formSuccess %>";
                formStatus.classList.add('bg-green-50', 'text-green-800', 'border', 'border-green-200');
                formStatus.classList.remove('hidden');
                form.reset();
              } else {
                throw new Error('Network response was not ok');
              }
            })
            .catch(function(error) {
              console.error('Error:', error);
              formStatus.textContent = "<%= locals.ui.formError %>";
              formStatus.classList.add('bg-red-50', 'text-red-800', 'border', 'border-red-200');
              formStatus.classList.remove('hidden');
            })
            .finally(function() {
              submitBtn.disabled = false;
              btnText.classList.remove('hidden');
              btnIcon.classList.remove('hidden');
              btnLoader.classList.add('hidden');
            });
          });
        </script>
      </div>

      <!-- Contact Info -->
      <div class="space-y-6 animate-on-scroll">
        <!-- Email Card -->
        <div class="card bg-gradient-to-br from-primary/5 to-primary/10 border border-primary/10">
          <h3 class="text-lg font-semibold text-police-titre mb-4"><%= locals.contact.writeUs %></h3>
          <a href="mailto:<%= locals.site.email %>" class="text-primary hover:underline flex items-center gap-2 text-lg font-medium" data-track-content data-content-name="Email Contact" data-content-piece="Contact Info Card">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
            </svg>
            <%= locals.site.email %>
          </a>
        </div>

        <!-- Why Choose Card -->
        <div class="card">
          <h3 class="text-lg font-semibold text-police-titre mb-4"><%= locals.contact.whyChoose %></h3>
          <ul class="space-y-3">
            <% locals.contact.whyItems.forEach(function(item) { %>
            <li class="flex items-start gap-3 text-police-grey">
              <svg class="w-5 h-5 text-success flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
              </svg>
              <span><%= item %></span>
            </li>
            <% }); %>
          </ul>
        </div>

        <!-- Demo CTA Card -->
        <div class="card bg-gradient-to-br from-primary to-secondary text-white border-0 shadow-xl">
          <div class="flex items-start gap-4">
            <div class="w-12 h-12 rounded-full bg-white/20 flex items-center justify-center flex-shrink-0">
              <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
              </svg>
            </div>
            <div>
              <h3 class="text-xl font-bold mb-2"><%= locals.contact.demoReady %></h3>
              <p class="text-white/90 leading-relaxed">
                <%= locals.contact.demoDescription %>
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

</main>

<%- include('./includes/_footer.ejs') %>

</body>
</html>
